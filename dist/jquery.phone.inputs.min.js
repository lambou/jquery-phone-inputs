!function(e,t){e.fn.phoneInputs=function(n){var a=e.extend({countriesUrl:"https://restcountries.eu/rest/v2/all",multiple:!0,defaultCountry:null,countryCodeAttr:"alpha2Code",countryNameAttr:"name",countryCallPrefix:"callingCodes",limit:1,lineTemplate:"#phone-inputs-line-template",lineErrorTemplate:"#phone-inputs-line-error-template",lineClass:"phone-inputs-line",invalidClass:"is-invalid",invalidMessageClass:"invalid-feedback",inputName:"phone",inputCountryName:"country",inputNumberName:"number",inputDefaultName:"default",inputNameAttr:"data-form-name",inputCountryNameAttr:"data-form-country-name",inputNumberNameAttr:"data-form-number-name",inputDefaultNameAttr:"data-form-default-name",dataAttr:"data",dataErrorsttr:"data-errors",addLineBtnClass:"btn-phone-inputs-add-line",deleteLineBtnClass:"btn-phone-inputs-delete-line",checkboxInputSectionClass:"phone-inputs-default-checkbox-section",required:!1},n),r={debug:"phone.inputs.debug",lineDelete:"phone.inputs.line.delete",change:"phone.inputs.change",lineAdded:"phone.inputs.line.added",defaultChoose:"phone.inputs.default.choose"};let i=[];const u=this;var l;function s(n,u,l=null){var s=e(t).find(a.lineTemplate).text(),p=e(s);u.find(`.${a.lineClass}`).length<a.limit?(a.multiple?(0==u.find(`.${a.lineClass}`).length?p.find(`.${a.deleteLineBtnClass}`).css({display:"none"}):p.find(`.${a.addLineBtnClass}`).css({display:"none"}),p.find("select").attr("name",`${u.attr(a.inputNameAttr)}[${u.find(`.${a.lineClass}`).length}][${u.attr(a.inputCountryNameAttr)}]`),p.find('input[type="text"]').attr("name",`${u.attr(a.inputNameAttr)}[${u.find(`.${a.lineClass}`).length}][${u.attr(a.inputNumberNameAttr)}]`),p.find('input[type="checkbox"]').attr("name",`${u.attr(a.inputNameAttr)}[${u.find(`.${a.lineClass}`).length}][${u.attr(a.inputDefaultNameAttr)}]`),p.find('input[type="checkbox"]').change(function(t){let a={country:p.find("select").val(),default:!0,number:p.find('input[type="text"]').val()};var i=jQuery.Event(r.defaultChoose);o(n,i,[{message:"Choosing a default number",data:a}]),d(n,r.debug,[{message:"Choosing a default number",data:a}]),i.isDefaultPrevented()||(u.find('input[type="checkbox"]').prop("checked",!1),e(this).prop("checked",!0),o(n,r.change,[{message:"Default number choosed",data:a}]),d(n,r.debug,[{message:"Default number choosed",data:a}]))})):(p.find(`.${a.deleteLineBtnClass}`).css({display:"none"}),p.find(`.${a.addLineBtnClass}`).css({display:"none"}),p.find('input[type="checkbox"]').css({display:"none"}),p.find(`.${a.checkboxInputSectionClass}`).css({display:"none"}),p.find("select").attr("name",`${u.attr(a.inputNameAttr)}[${u.attr(a.inputCountryNameAttr)}]`),p.find('input[type="text"]').attr("name",`${u.attr(a.inputNameAttr)}[${u.attr(a.inputNumberNameAttr)}]`),p.find('input[type="checkbox"]').attr("name",`${u.attr(a.inputNameAttr)}[${u.attr(a.inputDefaultNameAttr)}]`)),null!=l&&(p.find('input[type="text"]').val(l[`${u.attr(a.inputNumberNameAttr)}`]),p.find('input[type="checkbox"]').prop("checked",l[`${u.attr(a.inputDefaultNameAttr)}`])),a.required||u.attr("required")?(p.find("select").prop("required",!0),p.find('input[type="text"]').prop("required",!0)):(p.find("select").prop("required",!1),p.find('input[type="text"]').prop("required",!1)),p.find("select").find("option").remove(),i.forEach(t=>{var r=e(`<option value="${t[a.countryCodeAttr]}">${t[a.countryNameAttr]} (+${t[a.countryCallPrefix]})</option>`);null!=l?null!=l[`${u.attr(a.inputCountryNameAttr)}`]?t[a.countryCodeAttr].toLowerCase()==l[`${u.attr(a.inputCountryNameAttr)}`].toLowerCase()&&r.prop("selected",!0):d(n,event.debug,[{message:"The country attribute cannot be null.",data:l}]):null!=a.defaultCountry&&t[a.countryCodeAttr].toLowerCase()==a.defaultCountry.toLowerCase()&&r.prop("selected",!0),p.find("select").append(r)}),u.append(p),o(n,r.lineAdded,[{message:"A new phone number entry field has been added."}]),o(n,r.change,[{message:"A new phone number entry field has been added."}]),d(n,r.debug,[{message:"A new phone number entry field has been added."}])):d(n,r.debug,[{message:`The limit of phone number inputs (${a.limit}) have been reached.`}])}function d(e,t,n){e.trigger(t,n)}function o(e,t,n){e.trigger(t,n)}(l=u,e.get(a.countriesUrl,function(n){return i=n,l.each(function(n,i){var u=e(i);u.attr("data-form-name")||(l.length>1?u.attr(a.inputNameAttr,`phone_${n}`):u.attr(a.inputNameAttr,a.inputName)),u.attr(a.inputCountryNameAttr)||u.attr(a.inputCountryNameAttr,a.inputCountryName),u.attr(a.inputNumberNameAttr)||u.attr(a.inputNumberNameAttr,a.inputNumberName),u.attr(a.inputDefaultNameAttr)||u.attr(a.inputDefaultNameAttr,a.inputDefaultName);try{var p=JSON.parse(u.attr(a.dataAttr));Array.isArray(p)?p.forEach(e=>{s(l,u,e)}):s(l,u,p)}catch(e){s(l,u,null)}0==u.find('input[type="checkbox"]:checked').length&&u.find('input[type="checkbox"]').first().prop("checked",!0),function(n,i){i.find(`.${a.lineClass}`).each(function(u,l){try{var s=JSON.parse(i.attr(a.dataErrorsttr)),o=s[`${i.attr(a.inputNameAttr)}.${u}.${i.attr(a.inputNumberNameAttr)}`];if(o){var p=e(t).find(a.lineErrorTemplate).text();p=Array.isArray(o)?p.replace(new RegExp("%%error%%","gi"),o[0]):p.replace(new RegExp("%%error%%","gi"),o);var m=e(p);e(l).addClass(a.invalidClass),m.find(`.${a.invalidMessageClass}`).parent().addClass(a.invalidClass),e(l).append(m),m.find(`.${a.invalidMessageClass}`).is(":visible")||m.find(`.${a.invalidMessageClass}`).fadeIn("slow")}}catch(e){d(n,r.debug,[{message:"Unable to display errors",data:e}])}})}(l,u),e(t).on("click",`.${a.addLineBtnClass}`,function(t){t.preventDefault(),a.multiple?s(l,e(this).closest(u),null):d(l,r.debug,[{message:"multiple option is false. You can't add a new input."}])}),e(t).on("click",`.${a.deleteLineBtnClass}`,function(t){t.preventDefault();const n=e(this).closest(`.${a.lineClass}`),i={country:n.find("select").val(),default:n.find('input[type="checkbox"]').prop("checked"),number:n.find('input[type="text"]').val()};var s=jQuery.Event(r.lineDelete);o(l,s,[{message:"A phone number field is going to be removed",data:i}]),d(l,r.debug,[{message:"A phone number field is going to be removed",data:i}]),s.isDefaultPrevented()||(n.remove(),o(l,r.change,[{message:"A phone number field has been removed",data:i}]),function(t){t.find(`.${a.lineClass}`).each(function(n,r){const i=e(r);i.find("select").attr("name",`${t.attr(a.inputNameAttr)}[${n}][${t.attr(a.inputCountryNameAttr)}]`),i.find('input[type="text"]').attr("name",`${t.attr(a.inputNameAttr)}[${n}][${t.attr(a.inputNumberNameAttr)}]`),i.find('input[type="checkbox"]').attr("name",`${t.attr(a.inputNameAttr)}[${n}][${t.attr(a.inputDefaultNameAttr)}]`)})}(u),d(l,r.debug,[{message:"A phone number field has been removed",data:i}]))})})})).fail(function(){d(u,r.debug,[{message:`Unable to load countries from ${a.countriesUrl}`}])})}}(jQuery,document);